{% extends "base.html" %}

{% block content %}
<form method="post">
    {% csrf_token %}
    <textarea name="content" rows="3" placeholder="What's on your mind?"></textarea>
    <br><br>
    <button type="submit">Post</button>
</form>

<hr>

{% for post in posts %}
<div class="post">
    <div class="post-user">{{ post.user.username }}</div>
    <div>{{ post.content }}</div>
    <div class="post-time">{{ post.created_at }}</div>

    <div class="actions">
        <form method="post" style="display:inline;">
            {% csrf_token %}
            <button name="like_post" value="{{ post.id }}">
                ğŸ‘ {{ post.likes_count }}
            </button>
        </form>
    </div>

    {% for comment in post.comments.all %}
        <div class="comment">
            <b>{{ comment.user.username }}</b>: {{ comment.text }}
        </div>
    {% endfor %}

    <form method="post">
        {% csrf_token %}
        <input type="hidden" name="comment_post" value="{{ post.id }}">
        <input type="text" name="comment" placeholder="Add comment">
        <button type="submit">ğŸ’¬</button>
    </form>
</div>
{% endfor %}
{% endblock %}
